{"abstract":[{"type":"text","text":"A networking layer using native "},{"type":"codeVoice","code":"UrlSession"},{"type":"text","text":" and Swift concurrency."}],"identifier":{"url":"doc:\/\/Networking\/documentation\/Networking\/Documentation","interfaceLanguage":"swift"},"kind":"article","metadata":{"role":"article","title":"Networking","roleHeading":"Article","modules":[{"name":"Networking"}]},"sections":[],"variants":[{"paths":["\/documentation\/networking\/documentation"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/Networking\/documentation\/Networking"]]},"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","anchor":"Overview","level":2},{"type":"paragraph","inlineContent":[{"text":"Heavily inspired by Moya, the networking layer’s philosophy is focused on creating individual endpoint routers, transforming them into a valid URLRequest objects and applying optional adapters and processors in the network call pipeline.","type":"text"}]},{"anchor":"Router","type":"heading","text":"Router","level":2},{"inlineContent":[{"text":"By conforming to the ","type":"text"},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/Requestable","isActive":true,"type":"reference"},{"text":" protocol, you can define endpoint definitions containing the elementary HTTP request components necessary to create valid HTTP requests.","type":"text"},{"text":" ","type":"text"},{"type":"strong","inlineContent":[{"text":"Recommendation:","type":"text"}]},{"type":"text","text":" Follow the "},{"code":"Router","type":"codeVoice"},{"text":" naming convention to explicitly indicate the usage of a router pattern.","type":"text"}],"type":"paragraph"},{"type":"heading","level":3,"text":"Example","anchor":"Example"},{"type":"codeListing","syntax":"swift","code":["enum UserRouter { ","    case getUser","    case updateUser(UpdateUserRequest)","}","","extension UserRouter: Requestable {","    \/\/ The base URL address used for the HTTP call.","    var baseURL: URL { ","        URL(string: Constants.baseHost)!","    }","","    \/\/ Path will be appended to the base URL.","    var path: String { ","        switch self {","        case .getUser, .updateUser:","            return \"\/user\"","        }","    }","","    \/\/ HTTPMethod used for each endpoint.","    var method: HTTPMethod { ","        switch self {","        case .getUser:","            return .get        ","        case .updateUser:","            return .post","        }","    }","","    \/\/ Optional body data encoded in JSON by default.","    var dataType: RequestDataType? { ","        switch self {","        case .getUser:","            return nil","        case let .updateUser(data):","            return .encodable(data)","        }","    }","","    \/\/ Optional authentication requirement if AuthorizationInterceptor is used.","    var isAuthenticationRequired: Bool {","        switch self {","        case .getUser, .updateUser:","            return true","        }","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Some of the properties have default implementations defined in the "},{"code":"Requestable+Convenience","type":"codeVoice"},{"text":" extension.","type":"text"}]},{"text":"APIManager","level":2,"anchor":"APIManager","type":"heading"},{"inlineContent":[{"type":"text","text":"APIManager is responsible for the creation and management of a network call. It conforms to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/APIManaging"},{"type":"text","text":" protocol which allows you to define your own custom APIManager if needed."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"There are two ways to initialise the "},{"type":"codeVoice","code":"APIManager"},{"text":" object:","type":"text"}],"type":"paragraph"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Using URLSession as the response provider.","type":"text"}]}]}]},{"code":["init(","    urlSession: URLSession = .init(configuration: .default),","    requestAdapters: [RequestAdapting] = [],","    responseProcessors: [ResponseProcessing] = [StatusCodeProcessor.shared],","    errorProcessors: [ErrorProcessing] = []",")"],"type":"codeListing","syntax":"swift"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Using custom response provider by conforming to ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/ResponseProviding"},{"text":". An example of a custom provider is ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/MockResponseProvider"},{"type":"text","text":", which can be used for UI tests to interact with mocked data saved through “EndpointRequestStorageProcessor”. To utilize them, simply move the stored session folder into the Asset catalogue."}]}]}],"start":2,"type":"orderedList"},{"syntax":"swift","code":["init(","    responseProvider: ResponseProviding,","    requestAdapters: [RequestAdapting] = [],","    responseProcessors: [ResponseProcessing] = [StatusCodeProcessor.shared],","    errorProcessors: [ErrorProcessing] = []",")"],"type":"codeListing"},{"inlineContent":[{"text":"Adapters and processors are passed during initialisation and cannot be changed afterwards.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"There are two methods provided by the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/APIManaging"},{"text":" protocol:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Result is URLSession’s default (data, response) tuple."}],"type":"paragraph"}]}],"type":"orderedList"},{"syntax":"swift","code":["func request(","  _ endpoint: Requestable,","  retryConfiguration: RetryConfiguration?",") async throws -> Response"],"type":"codeListing"},{"start":2,"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Result is custom decodable object.","type":"text"}]}]}],"type":"orderedList"},{"type":"codeListing","syntax":"swift","code":["func request<DecodableResponse: Decodable>(","  _ endpoint: Requestable,","  decoder: JSONDecoder,","  retryConfiguration: RetryConfiguration?",") async throws -> DecodableResponse"]},{"level":3,"text":"Example","type":"heading","anchor":"Example"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the most simple form, the network request looks like this:"}]},{"type":"codeListing","code":["try await apiManager.request(UserRouter.getUser)"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"If you specify object type, the APIManager will automatically perform the decoding (given the received JSON correctly maps to the decodable). You can also specify a custom json decoder."}],"type":"paragraph"},{"syntax":"swift","code":["let userResponse: UserResponse = try await apiManager.request(UserRouter.getUser)"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Provide a custom after failure "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/RetryConfiguration"},{"type":"text","text":", specifying the count of retries, delay and a handler that determines whether the request should be tried again. Otherwise, "},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/RetryConfiguration\/default","isActive":true},{"text":" configuration is used.","type":"text"}]},{"syntax":"swift","code":["let retryConfiguration = RetryConfiguration(retries: 2, delay: .constant(1)) { error in ","    \/\/ custom logic here","}","let userResponse: UserResponse = try await apiManager.request(","    UserRouter.getUser,","    retryConfiguration: retryConfiguration",")"],"type":"codeListing"},{"type":"heading","anchor":"DownloadAPIManager","text":"DownloadAPIManager","level":2},{"type":"paragraph","inlineContent":[{"text":"DownloadAPIManager is responsible for the creation and management of a network file download. It conforms to the ","type":"text"},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/DownloadAPIManaging","isActive":true},{"type":"text","text":" protocol which allows you to define your own custom DownloadAPIManager if needed. Multiple parallel downloads are supported."}]},{"inlineContent":[{"type":"text","text":"The initialisation is equivalent to APIManager, except the session is created for the user based on a given "},{"type":"codeVoice","code":"URLSessionConfiguration"},{"type":"text","text":":"}],"type":"paragraph"},{"code":["init(","    urlSessionConfiguration: URLSessionConfiguration = .default,","    requestAdapters: [RequestAdapting] = [],","    responseProcessors: [ResponseProcessing] = [StatusCodeProcessor.shared],","    errorProcessors: [ErrorProcessing] = []",")"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Adapters and processors are passed during initialisation and cannot be changed afterwards."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The DownloadAPIManager contains a public property that enables you to keep track of current tasks in progress."}]},{"type":"codeListing","code":["var allTasks: [URLSessionDownloadTask] { get async }"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"There are three methods provided by the ","type":"text"},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/DownloadAPIManaging","isActive":true},{"text":" protocol:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Request download for a given endpoint. Returns a standard (URLSessionDownloadTask, Response) result for the HTTP handshake. This result is not the actual downloaded file, but the HTTP response received after the download is initiated.","type":"text"}]}]}]},{"type":"codeListing","syntax":"swift","code":["func downloadRequest(","    _ endpoint: Requestable,","    resumableData: Data? = nil,","    retryConfiguration: RetryConfiguration?",") async throws -> DownloadResult"]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Get progress async stream for a given task to observe task download progress and state."}]}]}],"start":2},{"code":["func progressStream(for task: URLSessionTask) -> AsyncStream<URLSessionTask.DownloadState>"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"DownloadState"},{"type":"text","text":" struct provides you with information about the download itself, including bytes downloaded, total byte size of the file being downloaded or the error if any occurs."}]},{"type":"orderedList","start":3,"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Invalidate download session in case DownloadAPIManager is not used as singleton to prevent memory leaks."}]}]}]},{"code":["func invalidateSession(shouldFinishTasks: Bool = false)"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"DownloadAPIManager is not deallocated from memory since URLSession is holding a reference to it. If you wish to use new instances of the DownloadAPIManager, don’t forget to invalidate the session if it is not needed anymore.","type":"text"}],"type":"paragraph"},{"anchor":"UploadAPIManager","type":"heading","level":2,"text":"UploadAPIManager"},{"type":"paragraph","inlineContent":[{"text":"Similarly to DownloadAPIManager we have an UploadAPIManager responsible for the creation and management of network file uploads. It conforms to the ","type":"text"},{"isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging","type":"reference"},{"type":"text","text":" protocol which allows you to define your own custom UploadAPIManager if needed. Multiple parallel uploads are supported."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The initialisation is equivalent to APIManager, except the session is created for the user based on a given "},{"code":"URLSessionConfiguration","type":"codeVoice"},{"text":":","type":"text"}]},{"code":["init(","    urlSessionConfiguration: URLSessionConfiguration = .default,","    requestAdapters: [RequestAdapting] = [],","    responseProcessors: [ResponseProcessing] = [StatusCodeProcessor.shared],","    errorProcessors: [ErrorProcessing] = []",")"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"Adapters and processors are passed during initialisation and cannot be changed afterwards.","type":"text"}]},{"inlineContent":[{"text":"The UploadAPIManager contains a public property that enables you to keep track of current tasks in progress.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["var activeTasks: [UploadTask] { get async }"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging","type":"reference","isActive":true},{"type":"text","text":" defines three methods for upload based on the upload type "},{"code":"Data","type":"codeVoice"},{"type":"text","text":", file "},{"type":"codeVoice","code":"URL"},{"type":"text","text":" and "},{"type":"codeVoice","code":"MultipartFormData"},{"text":". Each of these methods return an ","type":"text"},{"code":"UploadTask","type":"codeVoice"},{"type":"text","text":"."},{"text":" ","type":"text"},{"type":"text","text":"An "},{"code":"UploadTask","type":"codeVoice"},{"type":"text","text":" is a struct which under the hood represents + manages a URLSessionUploadTask and provides its state."}]},{"type":"paragraph","inlineContent":[{"text":"After firing an upload by one of these three methods, you can get a StateStream either from the ","type":"text"},{"type":"codeVoice","code":"UploadTask"},{"type":"text","text":" itself or from the manager with the following method."}]},{"code":["func stateStream(for uploadTaskId: UploadTask.ID) async -> StateStream"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"The ","type":"text"},{"code":"StateStream","type":"codeVoice"},{"text":" is a typealias for ","type":"text"},{"type":"codeVoice","code":"AsyncPublisher<AnyPublisher<UploadTask.State, Never>>"},{"type":"text","text":"."},{"text":" ","type":"text"},{"type":"text","text":"The "},{"code":"UploadTask.State","type":"codeVoice"},{"type":"text","text":" struct provides you with information about the upload itself, including bytes uploaded, total byte size of the file being uploaded or the error if any occurs."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The manager also allows for retries of uploads."}]},{"type":"codeListing","syntax":"swift","code":["    func retry(taskId: String) async throws"]},{"type":"paragraph","inlineContent":[{"text":"You should invalidate upload session in case UploadAPIManager is not used as singleton to prevent memory leaks.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["func invalidateSession(shouldFinishTasks: Bool = false)"]},{"inlineContent":[{"text":"UploadAPIManager is not deallocated from memory since URLSession is holding a reference to it. If you wish to use new instances of the UploadAPIManager, don’t forget to invalidate the session if it is not needed anymore.","type":"text"}],"type":"paragraph"},{"level":2,"type":"heading","anchor":"Retry-ability","text":"Retry ability"},{"inlineContent":[{"type":"text","text":"Both APIManager and DownloadAPIManager allow for configurable retry mechanism."}],"type":"paragraph"},{"code":["let retryConfiguration = RetryConfiguration(retries: 2, delay: .constant(1)) { error in ","    \/\/ custom logic here that determines whether the request should be retried","    \/\/ e.g you can only retry with 5xx http error codes","}"],"syntax":"swift","type":"codeListing"},{"level":2,"type":"heading","text":"Modifiers","anchor":"Modifiers"},{"inlineContent":[{"type":"text","text":"Modifiers are useful pieces of code that modify request\/response in the network request pipeline."},{"text":" ","type":"text"},{"type":"image","identifier":"interceptors-diagram.png"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"There are three types you can leverage:"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/RequestAdapting"}]},{"type":"paragraph","inlineContent":[{"text":"Adapters are request transformable components that perform operations on the URLRequest before it is dispatched. They are used to further customise HTTP requests before they are carried out by editing the URLRequest (e.g updating headers).","type":"text"}]},{"inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/ResponseProcessing"}],"type":"paragraph"},{"inlineContent":[{"text":"Processors are handling the ","type":"text"},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/Response","isActive":true},{"type":"text","text":" received after a successful network request."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/RequestInterceptor"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Interceptors handle both adapting and processing."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"By conforming to these protocols, you can create your own adaptors\/processors\/interceptors. In the following part, modifiers provided by Networking are introduced."}]},{"text":"Request Interceptors","anchor":"Request-Interceptors","level":2,"type":"heading"},{"level":3,"anchor":"Logging","text":"Logging","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Networking provides a default ","type":"text"},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/LoggingInterceptor","isActive":true,"type":"reference"},{"type":"text","text":" which internally uses "},{"type":"codeVoice","code":"os_log"},{"type":"text","text":" to pretty print requests\/responses. You can utilise it to get logging console output either for requests, responses or both."}]},{"syntax":"swift","code":["APIManager(","    \/\/","    requestAdapters: [LoggingInterceptor.shared],","    responseProcessors: [LoggingInterceptor.shared],","    errorProcessors: [LoggingInterceptor.shared]","    \/\/",")"],"type":"codeListing"},{"type":"heading","level":3,"text":"Authorization","anchor":"Authorization"},{"inlineContent":[{"type":"text","text":"Networking provides a default authorization handling for OAuth scenarios. Use the default "},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationTokenInterceptor","isActive":true},{"type":"text","text":" with the APIManager to obtain the behaviour of JWT Bearer authorization header injection and access token expiration refresh flow."}],"type":"paragraph"},{"inlineContent":[{"text":"Start by implementing an authorization manager by conforming to ","type":"text"},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationManaging","type":"reference","isActive":true},{"type":"text","text":". This manager requires you to provide storage defined by "},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationStorageManaging","isActive":true,"type":"reference"},{"text":" (where OAuth credentials will be stored) and a refresh method that will perform the refresh token network call to obtain a new OAuth pair. Optionally, you can provide custom implementations for ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationManaging\/authorizeRequest(_:)-6azlk"},{"type":"text","text":" (by default, this method sets the authorization header) or access token getter (by default, this method returns the access token saved in provided storage)."}],"type":"paragraph"},{"syntax":"swift","code":["let authorizationManager = CustomAuthorizationManager()","let authorizationInterceptor = AuthorizationTokenInterceptor(authorizationManager: authorizationManager)","APIManager(","    \/\/","    requestAdapters: [authorizationInterceptor],","    responseProcessors: [authorizationInterceptor],","    \/\/",")"],"type":"codeListing"},{"type":"codeListing","code":["final class CustomAuthorizationManager: AuthorizationManaging {","    let storage: AuthorizationStorageManaging = CustomAuthorizationStorageManager()","        ","    \/\/\/ For refresh token logic, create a new instance of APIManager ","    \/\/\/ without injecting `AuthorizationTokenInterceptor` to avoid cycling in refreshes    ","    private let apiManager: APIManager = APIManager()","    ","    func refreshAuthorizationData(with refreshToken: String) async throws -> Networking.AuthorizationData {","        \/\/ perform an network request to obtain refresh OAuth credentials","    }","}"],"syntax":"swift"},{"anchor":"Processors","type":"heading","level":2,"text":"Processors"},{"text":"Status Code","level":3,"type":"heading","anchor":"Status-Code"},{"type":"paragraph","inlineContent":[{"text":"Each ","type":"text"},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/Requestable","type":"reference","isActive":true},{"text":" endpoint definition contains an ","type":"text"},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/Requestable\/acceptableStatusCodes-9q0ur","isActive":true},{"type":"text","text":" range of acceptable status codes. By default, these are set to "},{"type":"codeVoice","code":"200..<400"},{"type":"text","text":". Networking provides a default status code processor that makes sure the received response’s HTTP code is an acceptable one, otherwise an "},{"isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/NetworkError\/unacceptableStatusCode(statusCode:acceptedStatusCodes:response:)","type":"reference"},{"type":"text","text":" error is thrown."}]},{"code":["APIManager(","    \/\/    ","    responseProcessors: [StatusCodeProcessor.shared],","    \/\/",")"],"type":"codeListing","syntax":"swift"},{"level":3,"type":"heading","text":"Storage","anchor":"Storage"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Networking provides an "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/EndpointRequestStorageProcessor"},{"type":"text","text":" which allows for requests and responses to be saved locally into the file system. Requests are stored in a sequential manner. Each session is kept in its own dedicated folder. The "},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/EndpointRequestStorageModel","type":"reference","isActive":true},{"type":"text","text":" includes both successful and erroneous data."}]},{"inlineContent":[{"text":"Initialise by optionally providing a ","type":"text"},{"type":"codeVoice","code":"FileManager"},{"type":"text","text":" instance, "},{"type":"codeVoice","code":"JSONEncoder"},{"text":" to be used during request\/response data encoding and a configuration. The configuration allows you to set optionally a multiPeerSharing configuration if you wish to utilize the multipeer connectivity feature for sharing the ","type":"text"},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/EndpointRequestStorageModel","isActive":true},{"type":"text","text":" with devices using the "},{"type":"codeVoice","code":"MultipeerConnectivity"},{"type":"text","text":" framework."}],"type":"paragraph"},{"code":["init(","    fileManager: FileManager = .default,","    jsonEncoder: JSONEncoder? = nil,","    config: Config = .default",")"],"type":"codeListing","syntax":"swift"},{"level":2,"text":"Associated array query parameters","type":"heading","anchor":"Associated-array-query-parameters"},{"type":"paragraph","inlineContent":[{"text":"When specifying urlParameters in the endpoint definition, use an ","type":"text"},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/ArrayParameter","isActive":true,"type":"reference"},{"type":"text","text":" to define multiple values for a single URL query parameter. The struct lets you decide which "},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/ArrayEncoding","isActive":true,"type":"reference"},{"type":"text","text":" will be used during the creation of the URL."}]},{"inlineContent":[{"text":"There are two currently supported encodings:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Comma separated"}],"type":"paragraph"}]}],"type":"orderedList"},{"type":"codeListing","syntax":"swift","code":["http:\/\/example.com?filter=1,2,3"]},{"start":2,"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Individual (default)","type":"text"}]}]}],"type":"orderedList"},{"syntax":"swift","type":"codeListing","code":["http:\/\/example.com?filter=1&filter=2&filter=3"]},{"text":"Example","type":"heading","level":3,"anchor":"Example"},{"type":"codeListing","syntax":"swift","code":["var urlParameters: [String: Any]? { ","     [\"filter\": ArrayParameter([1, 2, 3], arrayEncoding: .individual)]","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"references":{"doc://Networking/documentation/Networking/Requestable/acceptableStatusCodes-9q0ur":{"kind":"symbol","role":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"acceptableStatusCodes","kind":"identifier"},{"kind":"text","text":": "},{"text":"Range","kind":"typeIdentifier","preciseIdentifier":"s:Sn"},{"text":"<","kind":"text"},{"text":"HTTPStatusCode","kind":"typeIdentifier","preciseIdentifier":"s:10Networking14HTTPStatusCodea"},{"text":">?","kind":"text"}],"defaultImplementations":1,"abstract":[{"type":"text","text":"The HTTP status codes which are allowed as acceptable for request."}],"required":true,"type":"topic","url":"\/documentation\/networking\/requestable\/acceptablestatuscodes-9q0ur","title":"acceptableStatusCodes","identifier":"doc:\/\/Networking\/documentation\/Networking\/Requestable\/acceptableStatusCodes-9q0ur"},"doc://Networking/documentation/Networking/LoggingInterceptor":{"abstract":[{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/RequestInterceptor"},{"text":" which logs requests & responses info into console in pretty way","type":"text"}],"url":"\/documentation\/networking\/logginginterceptor","navigatorTitle":[{"text":"LoggingInterceptor","kind":"identifier"}],"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"LoggingInterceptor"}],"kind":"symbol","role":"symbol","title":"LoggingInterceptor","identifier":"doc:\/\/Networking\/documentation\/Networking\/LoggingInterceptor","type":"topic"},"doc://Networking/documentation/Networking/ResponseProcessing":{"type":"topic","abstract":[{"type":"text","text":"A type that is able to modify a "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/Response"},{"type":"text","text":" when it’s received from the network layer."}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/ResponseProcessing","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"ResponseProcessing"}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"text":"ResponseProcessing","kind":"identifier"}],"url":"\/documentation\/networking\/responseprocessing","role":"symbol","title":"ResponseProcessing"},"doc://Networking/documentation/Networking/AuthorizationManaging/authorizeRequest(_:)-6azlk":{"title":"authorizeRequest(_:)","abstract":[],"identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationManaging\/authorizeRequest(_:)-6azlk","kind":"symbol","required":true,"defaultImplementations":1,"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"authorizeRequest","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"s:10Foundation10URLRequestV","text":"URLRequest","kind":"typeIdentifier"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"URLRequest","preciseIdentifier":"s:10Foundation10URLRequestV","kind":"typeIdentifier"}],"url":"\/documentation\/networking\/authorizationmanaging\/authorizerequest(_:)-6azlk","role":"symbol","type":"topic"},"doc://Networking/documentation/Networking/NetworkError/unacceptableStatusCode(statusCode:acceptedStatusCodes:response:)":{"kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"An indication that the received HTTP status code in not accepted as valid."}],"fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"text":"unacceptableStatusCode","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"statusCode"},{"text":": ","kind":"text"},{"text":"HTTPStatusCode","kind":"typeIdentifier","preciseIdentifier":"s:10Networking14HTTPStatusCodea"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"acceptedStatusCodes"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Sn","kind":"typeIdentifier","text":"Range"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:10Networking14HTTPStatusCodea","kind":"typeIdentifier","text":"HTTPStatusCode"},{"kind":"text","text":">, "},{"text":"response","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Response","kind":"typeIdentifier","preciseIdentifier":"s:10Networking8Responsea"},{"text":")","kind":"text"}],"type":"topic","url":"\/documentation\/networking\/networkerror\/unacceptablestatuscode(statuscode:acceptedstatuscodes:response:)","title":"NetworkError.unacceptableStatusCode(statusCode:acceptedStatusCodes:response:)","identifier":"doc:\/\/Networking\/documentation\/Networking\/NetworkError\/unacceptableStatusCode(statusCode:acceptedStatusCodes:response:)"},"doc://Networking/documentation/Networking/RetryConfiguration/default":{"kind":"symbol","role":"symbol","title":"default","identifier":"doc:\/\/Networking\/documentation\/Networking\/RetryConfiguration\/default","type":"topic","abstract":[],"url":"\/documentation\/networking\/retryconfiguration\/default","fragments":[{"kind":"keyword","text":"static"},{"text":" ","kind":"text"},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"text":"`default`","kind":"identifier"},{"text":": ","kind":"text"},{"text":"RetryConfiguration","kind":"typeIdentifier","preciseIdentifier":"s:10Networking18RetryConfigurationV"}]},"doc://Networking/documentation/Networking/AuthorizationManaging":{"title":"AuthorizationManaging","identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationManaging","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"AuthorizationManaging"}],"abstract":[{"text":"AuthorizationManaging authorizes requests and manages refresh token mechanism","type":"text"},{"type":"text","text":" "},{"text":"AuthorizationStorageManaging is required to read & store ","type":"text"},{"type":"codeVoice","code":"AuthorizationData"}],"navigatorTitle":[{"text":"AuthorizationManaging","kind":"identifier"}],"kind":"symbol","type":"topic","url":"\/documentation\/networking\/authorizationmanaging","role":"symbol"},"doc://Networking/documentation/Networking/Response":{"type":"topic","abstract":[{"type":"text","text":"A default "},{"code":"URLSession","type":"codeVoice"},{"text":" response tuple.","type":"text"}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/Response","kind":"symbol","navigatorTitle":[{"text":"Response","kind":"identifier"}],"fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Response"}],"url":"\/documentation\/networking\/response","role":"symbol","title":"Response"},"doc://Networking/documentation/Networking/RequestInterceptor":{"title":"RequestInterceptor","type":"topic","identifier":"doc:\/\/Networking\/documentation\/Networking\/RequestInterceptor","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"RequestInterceptor"}],"fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"text":"RequestInterceptor","kind":"identifier"}],"url":"\/documentation\/networking\/requestinterceptor","role":"symbol","abstract":[{"type":"text","text":"A modifier which adapts a request and also processes a response."}]},"doc://Networking/documentation/Networking/EndpointRequestStorageModel":{"type":"topic","kind":"symbol","url":"\/documentation\/networking\/endpointrequeststoragemodel","title":"EndpointRequestStorageModel","identifier":"doc:\/\/Networking\/documentation\/Networking\/EndpointRequestStorageModel","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"kind":"identifier","text":"EndpointRequestStorageModel"}],"abstract":[{"text":"A model containing all necessary info about request and related response to be replayed as mocked data.","type":"text"}],"navigatorTitle":[{"text":"EndpointRequestStorageModel","kind":"identifier"}],"role":"symbol"},"doc://Networking/documentation/Networking/ResponseProviding":{"url":"\/documentation\/networking\/responseproviding","title":"ResponseProviding","type":"topic","role":"symbol","identifier":"doc:\/\/Networking\/documentation\/Networking\/ResponseProviding","abstract":[{"type":"text","text":"A type is able to provide a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/Response"},{"text":" for a given ","type":"text"},{"code":"URLRequest","type":"codeVoice"},{"type":"text","text":"."}],"kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"text":"ResponseProviding","kind":"identifier"}],"navigatorTitle":[{"kind":"identifier","text":"ResponseProviding"}]},"doc://Networking/documentation/Networking/AuthorizationTokenInterceptor":{"navigatorTitle":[{"text":"AuthorizationTokenInterceptor","kind":"identifier"}],"fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"AuthorizationTokenInterceptor","kind":"identifier"}],"abstract":[],"identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationTokenInterceptor","title":"AuthorizationTokenInterceptor","url":"\/documentation\/networking\/authorizationtokeninterceptor","kind":"symbol","role":"symbol","type":"topic"},"doc://Networking/documentation/Networking/Requestable":{"type":"topic","url":"\/documentation\/networking\/requestable","title":"Requestable","role":"symbol","identifier":"doc:\/\/Networking\/documentation\/Networking\/Requestable","kind":"symbol","abstract":[{"type":"text","text":"A type that represents an API endpoint."}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"text":"Requestable","kind":"identifier"}],"navigatorTitle":[{"text":"Requestable","kind":"identifier"}]},"doc://Networking/documentation/Networking/RequestAdapting":{"abstract":[{"type":"text","text":"A type that is able to modify a request before sending it to an API."}],"role":"symbol","identifier":"doc:\/\/Networking\/documentation\/Networking\/RequestAdapting","title":"RequestAdapting","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"RequestAdapting","kind":"identifier"}],"navigatorTitle":[{"text":"RequestAdapting","kind":"identifier"}],"kind":"symbol","url":"\/documentation\/networking\/requestadapting","type":"topic"},"doc://Networking/documentation/Networking/MockResponseProvider":{"kind":"symbol","type":"topic","identifier":"doc:\/\/Networking\/documentation\/Networking\/MockResponseProvider","title":"MockResponseProvider","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"MockResponseProvider","kind":"identifier"}],"url":"\/documentation\/networking\/mockresponseprovider","role":"symbol","abstract":[{"type":"text","text":"A response provider which creates responses for requests from corresponding data files stored in Assets."}],"navigatorTitle":[{"text":"MockResponseProvider","kind":"identifier"}]},"doc://Networking/documentation/Networking/DownloadAPIManaging":{"navigatorTitle":[{"kind":"identifier","text":"DownloadAPIManaging"}],"title":"DownloadAPIManaging","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"DownloadAPIManaging"}],"type":"topic","url":"\/documentation\/networking\/downloadapimanaging","kind":"symbol","abstract":[{"type":"text","text":"A definition of an API layer with methods for handling data downloading."},{"type":"text","text":" "},{"text":"Recommended to be used as singleton.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"If you wish to use multiple instances, make sure you manually invalidate url session by calling the "},{"type":"codeVoice","code":"invalidateSession"},{"text":" method.","type":"text"}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/DownloadAPIManaging","role":"symbol"},"doc://Networking/documentation/Networking/APIManaging":{"url":"\/documentation\/networking\/apimanaging","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"text":"APIManaging","kind":"identifier"}],"title":"APIManaging","role":"symbol","abstract":[{"type":"text","text":"A definition of an API layer with methods for handling API requests."}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/APIManaging","type":"topic","navigatorTitle":[{"kind":"identifier","text":"APIManaging"}],"kind":"symbol"},"doc://Networking/documentation/Networking/EndpointRequestStorageProcessor":{"type":"topic","role":"symbol","abstract":[{"type":"text","text":"A response processor which stores all responses & related requests data into files."}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/EndpointRequestStorageProcessor","url":"\/documentation\/networking\/endpointrequeststorageprocessor","title":"EndpointRequestStorageProcessor","kind":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"EndpointRequestStorageProcessor","kind":"identifier"}],"navigatorTitle":[{"text":"EndpointRequestStorageProcessor","kind":"identifier"}]},"doc://Networking/documentation/Networking":{"type":"topic","identifier":"doc:\/\/Networking\/documentation\/Networking","kind":"symbol","url":"\/documentation\/networking","abstract":[],"title":"Networking","role":"collection"},"doc://Networking/documentation/Networking/RetryConfiguration":{"navigatorTitle":[{"kind":"identifier","text":"RetryConfiguration"}],"url":"\/documentation\/networking\/retryconfiguration","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"RetryConfiguration","kind":"identifier"}],"kind":"symbol","identifier":"doc:\/\/Networking\/documentation\/Networking\/RetryConfiguration","abstract":[{"text":"Retry of API calls allows various options wrapped into ","type":"text"},{"type":"codeVoice","code":"RetryConfiguration"},{"type":"text","text":" struct."}],"role":"symbol","title":"RetryConfiguration"},"doc://Networking/documentation/Networking/ArrayParameter":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ArrayParameter","kind":"identifier"}],"url":"\/documentation\/networking\/arrayparameter","kind":"symbol","title":"ArrayParameter","type":"topic","role":"symbol","identifier":"doc:\/\/Networking\/documentation\/Networking\/ArrayParameter","abstract":[{"text":"Array parameter type for associated values with array encoding option.","type":"text"}],"navigatorTitle":[{"kind":"identifier","text":"ArrayParameter"}]},"interceptors-diagram.png":{"alt":"Interceptors diagram","type":"image","identifier":"interceptors-diagram.png","variants":[{"url":"\/images\/interceptors-diagram.png","traits":["1x","light"]}]},"doc://Networking/documentation/Networking/ArrayEncoding":{"navigatorTitle":[{"text":"ArrayEncoding","kind":"identifier"}],"type":"topic","abstract":[{"type":"text","text":"Associated array parameters query options."}],"role":"symbol","url":"\/documentation\/networking\/arrayencoding","title":"ArrayEncoding","identifier":"doc:\/\/Networking\/documentation\/Networking\/ArrayEncoding","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"text":"ArrayEncoding","kind":"identifier"}],"kind":"symbol"},"doc://Networking/documentation/Networking/UploadAPIManaging":{"kind":"symbol","url":"\/documentation\/networking\/uploadapimanaging","title":"UploadAPIManaging","navigatorTitle":[{"text":"UploadAPIManaging","kind":"identifier"}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"UploadAPIManaging"}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging","abstract":[],"role":"symbol","type":"topic"},"doc://Networking/documentation/Networking/AuthorizationStorageManaging":{"kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"AuthorizationStorageManaging"}],"role":"symbol","type":"topic","title":"AuthorizationStorageManaging","identifier":"doc:\/\/Networking\/documentation\/Networking\/AuthorizationStorageManaging","abstract":[{"text":"Basic operations to store ","type":"text"},{"type":"codeVoice","code":"AuthorizationData"},{"text":" ","type":"text"},{"type":"text","text":"To keep consistency all operations are async"}],"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"AuthorizationStorageManaging"}],"url":"\/documentation\/networking\/authorizationstoragemanaging"}}}